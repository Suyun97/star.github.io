<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ˜Ÿè¾°ç”Ÿå‘½éˆæ•¸</title>

<style>
body{
  margin:0;
  font-family:"Segoe UI",sans-serif;
  background:radial-gradient(ellipse at bottom,#1b2735 0%,#090a0f 100%);
  color:#333;
}
.stars, .stars2{
  position:fixed; top:0; left:0; width:100%; height:100%;
  background-repeat:repeat; z-index:0;
}
.stars{
  background-image:radial-gradient(2px 2px at 20px 30px,#fff,transparent);
  animation:move 200s linear infinite;
}
.stars2{
  background-image:radial-gradient(1px 1px at 100px 80px,#fff,transparent);
  animation:move 300s linear infinite;
}
@keyframes move{to{transform:translateY(-2000px)}}

.container{
  position:relative;
  z-index:2;
  max-width:480px;
  margin:40px auto;
  background:rgba(255,255,255,0.95);
  border-radius:20px;
  padding:20px;
}

button,input{
  width:100%; padding:10px; margin-top:8px;
  border-radius:10px; border:1px solid #ccc;
}
button{
  background:linear-gradient(135deg,#6a11cb,#2575fc);
  color:#fff; border:none;
}
.tab{margin-top:10px;}
.card{
  background:#f5f6ff;
  border-radius:12px;
  padding:10px;
  margin-top:10px;
}
h1,h2{color:#5f2c82;}
small{color:#666;}
</style>
</head>

<body>
<div class="stars"></div><div class="stars2"></div>

<div class="container">
<h1>ğŸŒŒ æ˜Ÿè¾°ç”Ÿå‘½éˆæ•¸</h1>

<!-- ğŸµ èƒŒæ™¯éŸ³æ¨‚ -->
<button onclick="toggleMusic()">ğŸµ æ˜Ÿç©ºéŸ³æ¨‚ é–‹ / é—œ</button>
<audio id="bgm" loop>
  <source src="https://cdn.pixabay.com/audio/2022/08/02/audio_4eab7c0c4c.mp3">
</audio>

<hr>

<!-- å€‹äººå‘½ç›¤ -->
<h2>ğŸ”® å€‹äººå‘½ç›¤</h2>
<input type="date" id="b1">
<button onclick="analyze()">è§£ææˆ‘çš„æ˜Ÿè¾°</button>
<div id="personal"></div>

<hr>

<!-- æ„›æƒ…é…å° -->
<h2>ğŸ’• æ„›æƒ…é…å°</h2>
<input type="date" id="b2" placeholder="ä½ çš„ç”Ÿæ—¥">
<input type="date" id="b3" placeholder="å°æ–¹ç”Ÿæ—¥">
<button onclick="love()">è¨ˆç®—é…å°</button>
<div id="love"></div>

<hr>

<!-- éˆæ•¸ç™¾ç§‘ -->
<h2>ğŸ”¢ éˆæ•¸ç™¾ç§‘</h2>
<div id="library"></div>

</div>

<script>
const music=document.getElementById("bgm");
function toggleMusic(){music.paused?music.play():music.pause();}

function reduce(n){
  while(n>9 && n!==11 && n!==22){
    n=[...n.toString()].reduce((a,b)=>a+ +b,0);
  } return n;
}
function life(d){
  return reduce([...d.replaceAll("-","")].reduce((a,b)=>a+ +b,0));
}
function zodiac(m,d){
  const z=["æ‘©ç¾¯","æ°´ç“¶","é›™é­š","ç‰¡ç¾Š","é‡‘ç‰›","é›™å­","å·¨èŸ¹","ç…å­","è™•å¥³","å¤©ç§¤","å¤©è ","å°„æ‰‹"];
  const edge=[20,19,21,21,21,22,23,23,23,23,22,22];
  return d<edge[m-1]?z[(m+10)%12]:z[m%12];
}

const info={
1:"é ˜å°ã€è¡Œå‹•åŠ›",2:"é—œä¿‚ã€åˆä½œ",3:"å‰µæ„ã€è¡¨é”",
4:"ç©©å®šã€è²¬ä»»",5:"è‡ªç”±ã€è®ŠåŒ–",6:"é—œæ‡·ã€ç™‚ç™’",
7:"æ€è€ƒã€æ™ºæ…§",8:"æˆå°±ã€ç®¡ç†",9:"ç†æƒ³ã€åŒç†",
11:"ç›´è¦ºã€éˆæ€§",22:"å»ºæ§‹ã€å¯¦ç¾"
};

function analyze(){
  const b=document.getElementById("b1").value;
  if(!b) return;
  const [y,m,d]=b.split("-");
  const n=life(b);
  document.getElementById("personal").innerHTML=
  `<div class="card">
   <b>ç”Ÿå‘½éˆæ•¸ï¼š</b>${n}<br>
   <b>æ˜Ÿåº§ï¼š</b>${zodiac(+m,+d)}<br>
   <b>å€‹æ€§é—œéµï¼š</b>${info[n]}
   </div>`;
}

function love(){
  const a=document.getElementById("b2").value;
  const b=document.getElementById("b3").value;
  if(!a||!b) return;
  const ln=reduce(life(a)+life(b));
  document.getElementById("love").innerHTML=
  `<div class="card">
   <b>é…å°éˆæ•¸ï¼š</b>${ln}<br>
   é—œä¿‚ä¸»é¡Œï¼š${info[ln]}
   </div>`;
}

const lib=document.getElementById("library");
Object.keys(info).forEach(n=>{
  lib.innerHTML+=`<div class="card"><b>${n}è™Ÿéˆæ•¸</b><br>${info[n]}</div>`;
});
</script>
</body>
</html>
